<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compare MCMC estimates to "true" parameter values — MCMC-recover • bayesplot</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">bayesplot</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/users/interfaces/rstan.html">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/users/interfaces/rstanarm.html">rstanarm</a>
    </li>
    <li>
      <a href="http://mc-stan.org/users/interfaces/shinystan.html">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/users/interfaces/loo.html">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/users/interfaces/rstantools.html">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/bayesplot">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compare MCMC estimates to "true" parameter values</h1>
    </div>

    
    <p>Plots comparing MCMC estimates to "true" parameter values. Before fitting a
model to real data it is useful to simulate data according to the model using
known (fixed) parameter values and to check that these "true" parameter
values are (approximately) recovered by fitting the model to the simulated
data. See the <strong>Plot Descriptions</strong> section, below, for details on the
available plots.</p>
    

    <pre class="usage"><span class='fu'>mcmc_recover_intervals</span>(<span class='no'>x</span>, <span class='no'>true</span>, <span class='kw'>batch</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>, <span class='fu'>length</span>(<span class='no'>true</span>)),
  <span class='kw'>facet_args</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='no'>...</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>prob_outer</span> <span class='kw'>=</span> <span class='fl'>0.9</span>,
  <span class='kw'>point_est</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"median"</span>, <span class='st'>"mean"</span>, <span class='st'>"none"</span>), <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='fu'>mcmc_recover_scatter</span>(<span class='no'>x</span>, <span class='no'>true</span>, <span class='kw'>batch</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>, <span class='fu'>length</span>(<span class='no'>true</span>)),
  <span class='kw'>facet_args</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='no'>...</span>, <span class='kw'>point_est</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"median"</span>, <span class='st'>"mean"</span>), <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>3</span>,
  <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='fu'>mcmc_recover_hist</span>(<span class='no'>x</span>, <span class='no'>true</span>, <span class='kw'>facet_args</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='no'>...</span>, <span class='kw'>binwidth</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A 3-D array, matrix, list of matrices, or data frame of MCMC draws.
The <a href='MCMC-overview.html'>MCMC-overview</a> page provides details on how to specify each these
allowed inputs.</p></td>
    </tr>
    <tr>
      <th>true</th>
      <td><p>A numeric vector of "true" values of the parameters in <code>x</code>.
There should be one value in <code>true</code> for each parameter included in
<code>x</code> and the order of the parameters in <code>true</code> should be the same
as the order of the parameters in <code>x</code>.</p></td>
    </tr>
    <tr>
      <th>batch</th>
      <td><p>Optionally, a vector-like object (numeric, character, integer,
factor) used to split the parameters into batches. If <code>batch</code> is
specified, it must have the same length as <code>true</code> and be in the same
order as <code>true</code>. Parameters in the same batch will be grouped together
in the same facet in the plot (see the <strong>Examples</strong> section, below).
The default is to group all parameters together into a single batch.
Changing the default is most useful when parameters are on very different
scales, in which case <code>batch</code> can be used to group them into batches
within which it makes sense to use the same \(y\)-axis.</p></td>
    </tr>
    <tr>
      <th>facet_args</th>
      <td><p>Arguments (other than <code>facets</code>) passed to
<code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap'>facet_wrap</a></code> to control faceting.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Currently unused.</p></td>
    </tr>
    <tr>
      <th>prob</th>
      <td><p>The probability mass to include in the inner interval. The
default is <code>0.5</code> (50% interval).</p></td>
    </tr>
    <tr>
      <th>prob_outer</th>
      <td><p>The probability mass to include in the outer interval. The
default is <code>0.9</code> (90% interval).</p></td>
    </tr>
    <tr>
      <th>point_est</th>
      <td><p>The point estimate to show. Either <code>"median"</code> (the
default), <code>"mean"</code>, or <code>"none"</code>.</p></td>
    </tr>
    <tr>
      <th>size, alpha</th>
      <td><p>Passed to <code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>geom_point</a></code> to control the
appearance of plotted points.</p></td>
    </tr>
    <tr>
      <th>binwidth</th>
      <td><p>An optional value used as the <code>binwidth</code> argument to
<code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_histogram'>geom_histogram</a></code> to override the default binwidth.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A ggplot object that can be further customized using the
  <span class="pkg">ggplot2</span> package.</p>
    
    <h2 class="hasAnchor" id="plot-descriptions"><a class="anchor" href="#plot-descriptions"></a>Plot Descriptions</h2>

    
    <dl class='dl-horizontal'>
  <dt><code>mcmc_recover_intervals</code></dt><dd><p>Central intervals and point estimates computed from MCMC draws, with
   "true" values plotted using a different shape.</p></dd>
  <dt><code>mcmc_recover_scatter</code></dt><dd><p>Scatterplot of posterior means (or medians) against "true" values.</p></dd>
  <dt><code>mcmc_recover_hist</code></dt><dd><p>Histograms of the draws for each parameter with the "true" value overlaid
   as a vertical line.</p></dd>
</dl>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other MCMC: <code><a href='MCMC-combos.html'>MCMC-combos</a></code>,
  <code><a href='MCMC-diagnostics.html'>MCMC-diagnostics</a></code>,
  <code><a href='MCMC-distributions.html'>MCMC-distributions</a></code>,
  <code><a href='MCMC-intervals.html'>MCMC-intervals</a></code>, <code><a href='MCMC-nuts.html'>MCMC-nuts</a></code>,
  <code><a href='MCMC-overview.html'>MCMC-overview</a></code>,
  <code><a href='MCMC-scatterplots.html'>MCMC-scatterplots</a></code>,
  <code><a href='MCMC-traces.html'>MCMC-traces</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>not_run</span>({
  <span class='fu'>library</span>(<span class='no'>rstanarm</span>)
  <span class='no'>alpha</span> <span class='kw'>&lt;-</span> <span class='fl'>1</span>; <span class='no'>beta</span> <span class='kw'>&lt;-</span> <span class='fu'>rnorm</span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>3</span>); <span class='no'>sigma</span> <span class='kw'>&lt;-</span> <span class='fl'>2</span>
  <span class='no'>X</span> <span class='kw'>&lt;-</span> <span class='fu'>matrix</span>(<span class='fu'>rnorm</span>(<span class='fl'>1000</span>), <span class='fl'>100</span>, <span class='fl'>10</span>)
  <span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'>rnorm</span>(<span class='fl'>100</span>, <span class='kw'>mean</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='no'>alpha</span> + <span class='no'>X</span> <span class='kw'>%*%</span> <span class='no'>beta</span>), <span class='kw'>sd</span> <span class='kw'>=</span> <span class='no'>sigma</span>)
  <span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>stan_glm</span>(<span class='no'>y</span> ~ <span class='no'>.</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'>data.frame</span>(<span class='no'>y</span>, <span class='no'>X</span>))
  <span class='no'>draws</span> <span class='kw'>&lt;-</span> <span class='fu'>as.matrix</span>(<span class='no'>fit</span>)
  <span class='fu'>print</span>(<span class='fu'>colnames</span>(<span class='no'>draws</span>))
  <span class='no'>true</span> <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='no'>alpha</span>, <span class='no'>beta</span>, <span class='no'>sigma</span>)

  <span class='fu'>mcmc_recover_intervals</span>(<span class='no'>draws</span>, <span class='no'>true</span>)

  <span class='co'># put the coefficients on X into the same batch</span>
  <span class='fu'>mcmc_recover_intervals</span>(<span class='no'>draws</span>, <span class='no'>true</span>, <span class='kw'>batch</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fu'>rep</span>(<span class='fl'>2</span>, <span class='fl'>10</span>), <span class='fl'>1</span>))
  <span class='co'># equivalent</span>
  <span class='fu'>mcmc_recover_intervals</span>(<span class='no'>draws</span>, <span class='no'>true</span>, <span class='kw'>batch</span> <span class='kw'>=</span> <span class='fu'>grepl</span>(<span class='st'>"X"</span>, <span class='fu'>colnames</span>(<span class='no'>draws</span>)))
  <span class='co'># same but facets stacked vertically</span>
  <span class='fu'>mcmc_recover_intervals</span>(<span class='no'>draws</span>, <span class='no'>true</span>,
                         <span class='kw'>batch</span> <span class='kw'>=</span> <span class='fu'>grepl</span>(<span class='st'>"X"</span>, <span class='fu'>colnames</span>(<span class='no'>draws</span>)),
                         <span class='kw'>facet_args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>1</span>),
                         <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>3</span>)

  <span class='co'># each parameter in its own facet</span>
  <span class='fu'>mcmc_recover_intervals</span>(<span class='no'>draws</span>, <span class='no'>true</span>, <span class='kw'>batch</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fu'>ncol</span>(<span class='no'>draws</span>))
  <span class='co'># same but in a different order</span>
  <span class='fu'>mcmc_recover_intervals</span>(<span class='no'>draws</span>, <span class='no'>true</span>, <span class='kw'>batch</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>2</span>, <span class='fl'>5</span>:<span class='fl'>12</span>))
  <span class='co'># present as bias by centering with true values</span>
  <span class='fu'>mcmc_recover_intervals</span>(<span class='fu'>sweep</span>(<span class='no'>draws</span>, <span class='fl'>2</span>, <span class='no'>true</span>), <span class='fu'>rep</span>(<span class='fl'>0</span>, <span class='fu'>ncol</span>(<span class='no'>draws</span>))) + <span class='fu'><a href='bayesplot-helpers.html'>hline_0</a></span>()


  <span class='co'># scatterplot of posterior means vs true values</span>
  <span class='fu'>mcmc_recover_scatter</span>(<span class='no'>draws</span>, <span class='no'>true</span>, <span class='kw'>point_est</span> <span class='kw'>=</span> <span class='st'>"mean"</span>)


  <span class='co'># histograms of parameter draws with true value added as vertical line</span>
  <span class='fu'><a href='bayesplot-colors.html'>color_scheme_set</a></span>(<span class='st'>"brightblue"</span>)
  <span class='fu'>mcmc_recover_hist</span>(<span class='no'>draws</span>[, <span class='fl'>1</span>:<span class='fl'>4</span>], <span class='no'>true</span>[<span class='fl'>1</span>:<span class='fl'>4</span>])
})</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#plot-descriptions">Plot Descriptions</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jonah Gabry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
