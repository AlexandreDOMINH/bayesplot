<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>PPCs for discrete outcomes — PPC-discrete • bayesplot</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="PPCs for discrete outcomes — PPC-discrete" />

<meta property="og:description" content="Many of the PPC functions in bayesplot can
be used with discrete data. The small subset of these functions that can
only be used if y and yrep are discrete are documented
on this page. Currently these include rootograms for count outcomes and bar
plots for ordinal, categorical, and multinomial outcomes. See the
Plot Descriptions section below." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bayesplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/bayesplot">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PPCs for discrete outcomes</h1>
    
    <div class="hidden name"><code>PPC-discrete.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Many of the <a href='PPC-overview.html'>PPC</a> functions in <span class="pkg">bayesplot</span> can
be used with discrete data. The small subset of these functions that can
<em>only</em> be used if <code>y</code> and <code>yrep</code> are discrete are documented
on this page. Currently these include rootograms for count outcomes and bar
plots for ordinal, categorical, and multinomial outcomes. See the
<strong>Plot Descriptions</strong> section below.</p>
    
    </div>

    <pre class="usage"><span class='fu'>ppc_bars</span>(<span class='no'>y</span>, <span class='no'>yrep</span>, <span class='no'>...</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.9</span>, <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>0.9</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>fatten</span> <span class='kw'>=</span> <span class='fl'>3</span>,
  <span class='kw'>freq</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>ppc_bars_grouped</span>(<span class='no'>y</span>, <span class='no'>yrep</span>, <span class='no'>group</span>, <span class='kw'>facet_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(), <span class='no'>...</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.9</span>,
  <span class='kw'>width</span> <span class='kw'>=</span> <span class='fl'>0.9</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>fatten</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>freq</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>ppc_rootogram</span>(<span class='no'>y</span>, <span class='no'>yrep</span>, <span class='kw'>style</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"standing"</span>, <span class='st'>"hanging"</span>, <span class='st'>"suspended"</span>), <span class='no'>...</span>,
  <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.9</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='fl'>1</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>y</th>
      <td><p>A vector of observations. See <strong>Details</strong>.</p></td>
    </tr>
    <tr>
      <th>yrep</th>
      <td><p>An \(S\) by \(N\) matrix of draws from the posterior
predictive distribution, where \(S\) is the size of the posterior sample
(or subset of the posterior sample used to generate <code>yrep</code>) and
\(N\) is the number of observations (the length of <code>y</code>). The columns
of <code>yrep</code> should be in the same order as the data points in <code>y</code>
for the plots to make sense. See <strong>Details</strong> for additional
instructions.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Currently unused.</p></td>
    </tr>
    <tr>
      <th>prob</th>
      <td><p>A value between 0 and 1 indicating the desired probability mass
to include in the <code>yrep</code> intervals. Set <code>prob=0</code> to
remove the intervals. For <code>ppc_rootogram</code> these are intervals
of the <em>square roots</em> of the expected counts.</p></td>
    </tr>
    <tr>
      <th>width</th>
      <td><p>For <code>ppc_bars</code> and <code>ppc_bars_grouped</code>,
passed to <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_bar'>geom_bar</a></code> to control the bar width.</p></td>
    </tr>
    <tr>
      <th>size, fatten</th>
      <td><p>For <code>ppc_bars</code> and <code>ppc_bars_grouped</code>,
<code>size</code> and <code>fatten</code> are passed to
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_linerange'>geom_pointrange</a></code> to control the appearance of the
<code>yrep</code> points and intervals. For <code>ppc_rootogram</code> <code>size</code> is
passed to <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></code>.</p></td>
    </tr>
    <tr>
      <th>freq</th>
      <td><p>For <code>ppc_bars</code> and <code>ppc_bars_grouped</code>, if <code>TRUE</code>
(the default) the y-axis will display counts. Setting <code>freq=FALSE</code>
will put proportions on the y-axis.</p></td>
    </tr>
    <tr>
      <th>group</th>
      <td><p>A grouping variable (a vector or factor) the same length as
<code>y</code>. Each value in <code>group</code> is interpreted as the group level
pertaining to the corresponding value of <code>y</code>.</p></td>
    </tr>
    <tr>
      <th>facet_args</th>
      <td><p>An optional list of  arguments (other than <code>facets</code>)
passed to <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap'>facet_wrap</a></code> to control faceting.</p></td>
    </tr>
    <tr>
      <th>style</th>
      <td><p>For <code>ppc_rootogram</code>, a string specifying the rootogram
style. The options are <code>"standing"</code>, <code>"hanging"</code>, and
<code>"suspended"</code>. See the <strong>Plot Descriptions</strong> section, below, for
details on the different styles.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A ggplot object that can be further customized using the
  <span class="pkg">ggplot2</span> package.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For all of these plots <code>y</code> and <code>yrep</code> must be non-negative
  integers, although they need not be integers in the strict sense of <span style="R">R</span>'s
  <code><a href='https://www.rdocumentation.org/packages/base/topics/integer'>integer</a></code> type.</p>
    
    <h2 class="hasAnchor" id="plot-descriptions"><a class="anchor" href="#plot-descriptions"></a>Plot Descriptions</h2>

    
    <dl class='dl-horizontal'>
<dt><code>ppc_bars</code></dt><dd><p>Bar plot of <code>y</code> with <code>yrep</code> medians and uncertainty intervals
  superimposed on the bars.</p></dd>
<dt><code>ppc_bars_grouped</code></dt><dd><p>Same as <code>ppc_bars</code> but a separate plot (facet) is generated for each
  level of a grouping variable.</p></dd>
<dt><code>ppc_rootogram</code></dt><dd><p>Rootograms allow for diagnosing problems in count data models such as
  overdispersion or excess zeros. They consist of a histogram of <code>y</code>
  with the expected counts based on <code>yrep</code> overlaid as a line along with
  uncertainty intervals. The y-axis represents the square roots of the counts
  to approximately adjust for scale differences and thus ease comparison
  between observed and expected counts. Using the <code>style</code> argument, the
  histogram style can be adjusted to focus on different aspects of the data:
  <ul>
<li><p><em>Standing</em>: basic histogram of observed counts with curve
   showing expected counts.</p></li>
<li><p><em>Hanging</em>: observed counts counts hanging from the curve
   representing expected counts.</p></li>
<li><p><em>Suspended</em>: histogram of the differences between expected and
   observed counts.</p></li>
</ul>
  <strong>All of these are plotted on the square root scale</strong>. See Kleiber and
  Zeileis (2016) for advice on interpreting rootograms and selecting among
  the different styles.</p></dd>
</dl>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Kleiber, C. and Zeileis, A. (2016). Visualizing count data regressions using
rootograms. <em>The American Statistician</em>. 70(3): 296--303.
<a href='https://arxiv.org/abs/1605.01311'>https://arxiv.org/abs/1605.01311</a>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other PPCs: <code><a href='PPC-distributions.html'>PPC-distributions</a></code>,
  <code><a href='PPC-errors.html'>PPC-errors</a></code>, <code><a href='PPC-intervals.html'>PPC-intervals</a></code>,
  <code><a href='PPC-loo.html'>PPC-loo</a></code>, <code><a href='PPC-overview.html'>PPC-overview</a></code>,
  <code><a href='PPC-scatterplots.html'>PPC-scatterplots</a></code>,
  <code><a href='PPC-test-statistics.html'>PPC-test-statistics</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>9222017</span>)

<span class='co'># bar plots</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>N</span>) {
  <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>4</span>, <span class='kw'>size</span> <span class='kw'>=</span> <span class='no'>N</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.25</span>, <span class='fl'>0.4</span>, <span class='fl'>0.1</span>, <span class='fl'>0.25</span>))
}
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'>f</span>(<span class='fl'>100</span>)
<span class='no'>yrep</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/t'>t</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/lapply'>replicate</a></span>(<span class='fl'>500</span>, <span class='fu'>f</span>(<span class='fl'>100</span>)))
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/dim'>dim</a></span>(<span class='no'>yrep</span>)</div><div class='output co'>#&gt; [1] 500 100</div><div class='input'><span class='no'>group</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/gl'>gl</a></span>(<span class='fl'>2</span>, <span class='fl'>50</span>, <span class='kw'>length</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"GroupA"</span>, <span class='st'>"GroupB"</span>))

<span class='fu'><a href='bayesplot-colors.html'>color_scheme_set</a></span>(<span class='st'>"mix-pink-blue"</span>)
<span class='fu'>ppc_bars</span>(<span class='no'>y</span>, <span class='no'>yrep</span>)</div><div class='img'><img src='PPC-discrete-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># split by group, change interval width, and display proportion</span>
<span class='co'># instead of count on y-axis</span>
<span class='fu'><a href='bayesplot-colors.html'>color_scheme_set</a></span>(<span class='st'>"mix-blue-pink"</span>)
<span class='fu'>ppc_bars_grouped</span>(<span class='no'>y</span>, <span class='no'>yrep</span>, <span class='no'>group</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>freq</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='PPC-discrete-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># rootograms for counts</span>
<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Poisson'>rpois</a></span>(<span class='fl'>100</span>, <span class='fl'>20</span>)
<span class='no'>yrep</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/matrix'>matrix</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Poisson'>rpois</a></span>(<span class='fl'>10000</span>, <span class='fl'>20</span>), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>100</span>)

<span class='fu'><a href='bayesplot-colors.html'>color_scheme_set</a></span>(<span class='st'>"brightblue"</span>)
<span class='fu'>ppc_rootogram</span>(<span class='no'>y</span>, <span class='no'>yrep</span>)</div><div class='img'><img src='PPC-discrete-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>ppc_rootogram</span>(<span class='no'>y</span>, <span class='no'>yrep</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0</span>)</div><div class='img'><img src='PPC-discrete-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'>ppc_rootogram</span>(<span class='no'>y</span>, <span class='no'>yrep</span>, <span class='kw'>style</span> <span class='kw'>=</span> <span class='st'>"hanging"</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.8</span>)</div><div class='img'><img src='PPC-discrete-5.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>ppc_rootogram</span>(<span class='no'>y</span>, <span class='no'>yrep</span>, <span class='kw'>style</span> <span class='kw'>=</span> <span class='st'>"suspended"</span>)</div><div class='img'><img src='PPC-discrete-6.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#plot-descriptions">Plot Descriptions</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jonah Gabry, Tristan Mahr.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

